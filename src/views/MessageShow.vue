<template>
	<div class="showMessage">
		<el-button @click="back" type="primary" icon="el-icon-back"></el-button>
		<h1>样本的信息页面</h1>
		<el-container style="height: 800px; border: 1px solid #eee">
		  <el-aside width="200px" style="background-color: rgb(238, 241, 246)">
		    <el-row class="tac">
		      <el-col>
		        <el-menu
		          default-active="defaultActive"
		          class="el-menu-vertical-demo"
		          @open="handleOpen"
		          @close="handleClose"
		          background-color="#545c64"
		          text-color="#fff"
		          active-text-color="#ffd04b">
		          <el-submenu index="1">
		            <template slot="title">
		              <i class="el-icon-location"></i>
		              <span>基本信息</span>
		            </template>
		            <el-menu-item-group>
		            </el-menu-item-group>
		            </el-submenu>
		          </el-submenu>
		          <el-submenu index="2">
		            <template slot="title">
		              <i class="el-icon-menu"></i>
		              <span>API日志</span>
		            </template>
		            <el-menu-item-group>
		            </el-menu-item-group>
		            </el-submenu>
		          </el-submenu>
				  <el-submenu index="3">
				    <template slot="title">
				      <i class="el-icon-menu"></i>
				      <span>结果报告</span>
				    </template>
				     <el-submenu index="3-1">
				       <template slot="title">行为树</template>
				     </el-submenu>
					 <el-submenu index="3-2">
					   <template slot="title">相似度</template>
					 </el-submenu>
					 <el-submenu index="3-3">
					   <template slot="title">预测的家族</template>
					 </el-submenu>
				    </el-submenu>
				  </el-submenu>
		        </el-menu>
		      </el-col>
		    </el-row>
		  </el-aside>
		   <el-main>
		       <div class="main">
				   <div class="basicMessage" v-show="basicActive">
					  <h3>基本信息</h3>
					  <div style="display:flex;">
					      <table style="width: 100%" class="myTable">
					           <tr><td class="left_title">名称</td></tr>
					           <tr><td class="left_title">类型</td></tr>
					           <tr><td class="left_title">大小</td></tr>
					           <tr><td class="left_title">MD5</td></tr>
					           <tr><td class="left_title">任务id</td></tr>
					           <tr><td class="left_title">状态</td></tr>
					           <tr><td class="left_title">开始执行时间</td></tr>
					           <tr><td class="left_title">结束执行时间</td></tr>
					           <tr><td class="left_title">上传时间</td></tr>
					      </table>
						  <table>
						      <tr><td class="td_content">{{sampleMessage.fileName}}</td></tr>
						      <tr><td class="td_content">{{sampleMessage.fileType}}</td></tr>
						      <tr><td class="td_content">{{sampleMessage.fileSize}}</td></tr>
						      <tr><td class="td_content">{{sampleMessage.md5}}</td></tr>
							  <tr><td class="td_content">{{sampleMessage.taskId}}</td></tr>
							  <tr><td class="td_content">{{sampleMessage.status}}</td></tr>
						      <tr><td class="td_content">{{sampleMessage.beginExecuteTime}}</td></tr>
						      <tr><td class="td_content">{{sampleMessage.endExecuteTime}}</td></tr>
						      <tr><td class="td_content">{{sampleMessage.uploadTime}}</td></tr>
						   </table>
					   </div>
				   </div>
				   <div class="apiLog" v-show="apiActive">
				   		<h1>api日志</h1>
				   </div>
				   <div class="result">
				   		<div class="behavior" v-show="behaviorActive">
							<h1>行为树</h1>
						</div>
						<div class="similar" v-show="similarActive">
							<h1>相似度</h1>
						</div>
						<div class="predict" v-show="predictActive">
							<h1>预测的家族</h1>
						</div>
				   </div>
			   </div>
		   </el-main>
		</el-container>
	</div>
</template>

<script>
	export default{
		data(){
			return{
				apiMessage:{
					calls:[
						{
						    "return_value": null,
						    "stacktrace": null,
						    "nt_status": null,
						    "flags": null,
						    "arguments": null,
						    "api": "GetProcAddress",
						    "last_error": null,
						    "time": null,
						    "category": null,
						    "tid": null,
						    "status": null
						}
					],
					apiStatus:{}
				},
				sampleMessage:{
					sampleId: 16,
					md5: "4340bf46c8ef5d20a57971a3d5b707ba",
					fileName: "Kafan_Sample_0b1f17fef04eb99a8389ce18d457fbdce44ee07eff67225b67e7d5a86c4c6e84.exe",
					userId: 3,
					fileType: "exe",
					status: "executed",
					taskId: 1654,
					fileSize: "620.5KB",
					uploadTime: "2020-03-30T13:45:37.000+0000",
					beginExecuteTime: null,
					endExecuteTime: null,
					predictStatus: "0",
					apiPath: "E:\\\\save\\\\Kafan_Sample_0b1f17fef04eb99a8389ce18d457fbdce44ee07eff67225b67e7d5a86c4c6e84.doc",
					valid: "1"
				},
				apiActive:false,
				basicActive:false,
				resultActive:false,
				behaviorActive:false,
				similarActive:false,
				predictActive:false,
				defaultActive:1
			}
		},
		methods: {
			back(){
				//返回到列表页
				this.$router.push({
					path:"/history",
					name:"history",
					params:{}
				})
			},
			handleOpen(key, keyPath) {
			    //console.log(key);
				if(key=="1"){
					this.basicActive=true
				}
				if(key=="2"){
					this.apiActive=true
				}
				if(key=="3"){
					this.resultActive=true
				}
				if(key=="3-1"){
					this.behaviorActive=true
				}
				if(key=="3-2"){
					this.similarActive=true
				}
				if(key=="3-3"){
					this.predictActive=true
				}
			},
			handleClose(key, keyPath) {
			    //console.log(key);
				if(key=="1"){
					this.basicActive=false
				}
				if(key=="2"){
					this.apiActive=false
				}
				if(key=="3"){
					this.resultActive=false
				}
				if(key=="3-1"){
					this.behaviorActive=false
				}
				if(key=="3-2"){
					this.similarActive=false
				}
				if(key=="3-3"){
					this.predictActive=false
				}
			}
		},
		created(){
			 this.sampleMessage = this.$route.params.sampleMessage;
			 this.apiMessage = this.$route.params.apiMessage;
			 //console.log(this.sampleMessage)
		}
	}
</script>

<style scoped>
  .el-aside {
    background-color: #D3DCE6;
    color: #333;
    text-align: center;
    line-height: 200px;
  }
  
  .el-main {
    background-color: #E9EEF3;
    color: #333;
    text-align: center;
    line-height: 160px;
  }
  
  body > .el-container {
    margin-bottom: 40px;
  }
  
  .el-container:nth-child(5) .el-aside,
  .el-container:nth-child(6) .el-aside {
    line-height: 260px;
  }
  
  .el-container:nth-child(7) .el-aside {
    line-height: 320px;
  }
  .myTable {
    border-collapse: collapse;
    margin: 0 auto;
    text-align: center;
  }
   
  .myTable td,
  .myTable th {
    border: 1px solid #cad9ea;
    color: #666;
    height: 30px;
  }
</style>
